<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rate of Interest Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0; padding: 0;
        background: #f4f4f4;
    }
    .container {
        max-width: 600px;
        background: #fff;
        padding: 20px;
        margin: 20px auto;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h2 { text-align: center; margin-bottom: 20px; }
    label { display: block; margin-top: 10px; }
    select, input {
        width: 100%; padding: 8px; margin-top: 5px;
        border: 1px solid #ccc; border-radius: 5px;
    }
    button {
        margin-top: 15px; padding: 10px;
        background: #28a745; color: white; border: none;
        border-radius: 5px; cursor: pointer; width: 100%;
    }
    button:hover { background: #218838; }
    .result {
        margin-top: 15px; padding: 10px; background: #e9f7ef;
        border: 1px solid #28a745; border-radius: 5px;
    }
    canvas { margin-top: 20px; }
</style>
</head>
<body>

<div class="container">
    <h2>Rate of Interest Calculator</h2>

    <label for="type">Interest Type:</label>
    <select id="type" onchange="toggleCompounding()">
        <option value="simple">Simple Interest</option>
        <option value="compound">Compound Interest</option>
    </select>

    <label for="principal">Principal Amount (P):</label>
    <input type="number" id="principal" placeholder="Enter principal amount" step="0.01">

    <label for="maturity">Maturity Amount (A):</label>
    <input type="number" id="maturity" placeholder="Enter maturity amount" step="0.01">

    <label for="time">Time Period (in years):</label>
    <input type="number" id="time" placeholder="Enter time period" step="0.01">

    <div id="compoundingSection" style="display:none;">
        <label for="frequency">Compounding Frequency:</label>
        <select id="frequency">
            <option value="1">Yearly</option>
            <option value="2">Half-Yearly</option>
            <option value="4">Quarterly</option>
            <option value="12">Monthly</option>
        </select>
    </div>

    <button onclick="calculateROI()">Calculate</button>

    <div class="result" id="result" style="display:none;"></div>

    <canvas id="growthChart"></canvas>
    <canvas id="breakdownChart"></canvas>
</div>

<script>
let growthChart, breakdownChart;

function toggleCompounding() {
    const type = document.getElementById("type").value;
    document.getElementById("compoundingSection").style.display = 
        type === "compound" ? "block" : "none";
}

function calculateROI() {
    const P = parseFloat(document.getElementById("principal").value);
    const A = parseFloat(document.getElementById("maturity").value);
    const T = parseFloat(document.getElementById("time").value);
    const type = document.getElementById("type").value;
    const n = parseInt(document.getElementById("frequency").value);

    if (isNaN(P) || isNaN(A) || isNaN(T) || P <= 0 || A <= 0 || T <= 0) {
        alert("Please enter valid positive numbers for all fields.");
        return;
    }

    let rate = 0;
    if (type === "simple") {
        const I = A - P;
        rate = (I * 100) / (P * T);
    } else {
        rate = n * (Math.pow(A / P, 1 / (n * T)) - 1) * 100;
    }

    document.getElementById("result").style.display = "block";
    document.getElementById("result").innerHTML = 
        `<strong>Rate of Interest:</strong> ${rate.toFixed(2)}% per annum`;

    drawCharts(P, A, T, rate, type, n);
}

function drawCharts(P, A, T, rate, type, n) {
    const labels = [];
    const balances = [];
    let totalInterest = 0;

    for (let year = 0; year <= T; year++) {
        labels.push(`Year ${year}`);
        if (type === "simple") {
            let balance = P + (P * rate/100 * year);
            balances.push(balance);
        } else {
            let balance = P * Math.pow(1 + (rate/100)/n, n * year);
            balances.push(balance);
        }
    }

    totalInterest = balances[balances.length - 1] - P;

    if (growthChart) growthChart.destroy();
    if (breakdownChart) breakdownChart.destroy();

    const ctx1 = document.getElementById('growthChart').getContext('2d');
    growthChart = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Balance Over Time',
                data: balances,
                borderColor: 'blue',
                backgroundColor: 'rgba(0,0,255,0.1)',
                fill: true
            }]
        },
        options: { responsive: true }
    });

    const ctx2 = document.getElementById('breakdownChart').getContext('2d');
    breakdownChart = new Chart(ctx2, {
        type: 'pie',
        data: {
            labels: ['Principal', 'Total Interest'],
            datasets: [{
                data: [P, totalInterest],
                backgroundColor: ['#28a745', '#ffc107']
            }]
        },
        options: { responsive: true }
    });
}
</script>

</body>
</html>